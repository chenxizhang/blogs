# 【十五分钟Talkshow】为什么新浪微博的输入文本框具有记忆功能 
> 原文发表于 2012-02-29, 地址: http://www.cnblogs.com/chenxizhang/archive/2012/02/29/2373962.html 


<h1>摘要提示</h1> <p>“十万个为什么” 之<br>&nbsp;&nbsp;&nbsp; 为什么在新浪微博上面的输入文本框有记忆功能？</p> <p>&nbsp;&nbsp;&nbsp; 1.在网页关闭之前，如果文本框不为空，则将内容保存起来（保存到哪里去==&gt;cookie）</p> <p>&nbsp;&nbsp;&nbsp; 2.在网页加载的时候，想办法还原<br></p> <p>&nbsp;</p> <h1>视频地址</h1> <p><a title="http://www.tudou.com/programs/view/DOkXpZQnnFw/" href="http://www.tudou.com/programs/view/DOkXpZQnnFw/">http://www.tudou.com/programs/view/DOkXpZQnnFw/</a></p> <p><embed src="http://www.tudou.com/v/DOkXpZQnnFw/&amp;rpid=101037296&amp;resourceId=101037296_05_05_99/v.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" width="480" height="400"></embed></p> <p>&nbsp;</p> <h1>示例代码</h1><pre class="csharpcode"><span class="asp">&lt;%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplicationSample.Default" %&gt;</span>

<span class="kwrd">&lt;!</span><span class="html">DOCTYPE</span> <span class="attr">html</span> <span class="attr">PUBLIC</span> <span class="kwrd">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="kwrd">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="kwrd">&gt;</span>

<span class="kwrd">&lt;</span><span class="html">html</span> <span class="attr">xmlns</span><span class="kwrd">="http://www.w3.org/1999/xhtml"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">head</span> <span class="attr">runat</span><span class="kwrd">="server"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">title</span><span class="kwrd">&gt;&lt;/</span><span class="html">title</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">style</span> <span class="attr">type</span><span class="kwrd">="text/css"</span><span class="kwrd">&gt;</span>
        #txtInput {
            height: 113px;
            width: 694px;
        }
    <span class="kwrd">&lt;/</span><span class="html">style</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">src</span><span class="kwrd">="Scripts/jquery-1.4.4.min.js"</span> <span class="attr">type</span><span class="kwrd">="text/javascript"</span><span class="kwrd">&gt;&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span>
    &lt;script src=<span class="str">"Scripts/jquery.cookie.js"</span> type=<span class="str">"text/javascript"</span>&gt;&lt;/script&gt;

    &lt;script type=<span class="str">"text/javascript"</span>&gt;

        <span class="kwrd">function</span> SaveText() {
            <span class="kwrd">var</span> date = <span class="kwrd">new</span> Date();
            date.setTime(date.getTime() + (30 * 60 * 1000));
            $.cookie(<span class="str">"input"</span>, $(<span class="str">"#txtInput"</span>).text(), { expires: date });
        }


        $(<span class="kwrd">function</span> () {
            $(<span class="str">"#txtInput"</span>).text($.cookie(<span class="str">"input"</span>));
        });
    
    <span class="kwrd">&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">head</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;</span><span class="html">body</span> <span class="attr">onbeforeunload</span><span class="kwrd">="SaveText()"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">form</span> <span class="attr">id</span><span class="kwrd">="form1"</span> <span class="attr">runat</span><span class="kwrd">="server"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">div</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">textarea</span> <span class="attr">id</span><span class="kwrd">="txtInput"</span> <span class="attr">rows</span><span class="kwrd">="5"</span><span class="kwrd">&gt;&lt;/</span><span class="html">textarea</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">div</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">form</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">body</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">html</span><span class="kwrd">&gt;</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>