# MVVM实践中的Command与CommandParameter的使用 
> 原文发表于 2012-04-13, 地址: http://www.cnblogs.com/chenxizhang/archive/2012/04/13/2446415.html 


<h2>内容摘要</h2> <p>这一讲，我在原先一篇博客文章（<a href="http://www.cnblogs.com/chenxizhang/archive/2011/10/01/2197786.html">http://www.cnblogs.com/chenxizhang/archive/2011/10/01/2197786.html</a>）基础上，针对MVVM中Command的使用做了演示和讲解。灵活的数据绑定，和命令绑定，是MVVM的核心精神，善加这两个功能，将大大地简化我们的应用程序开发，提供更加合理的代码架构。可以这么说，如果你在做WPF,Silverlight或者相关的开发，你是必须要了解MVVM的。但是至于你使用具体哪一个框架，倒不是那么重要的，他们基本都很类似。</p> <p>&nbsp;</p> <h2>视频地址</h2> <p><a href="http://www.tudou.com/programs/view/SZXSes10MD0/">http://www.tudou.com/programs/view/SZXSes10MD0/</a></p> <p><embed src="http://www.tudou.com/v/SZXSes10MD0/&amp;rpid=101037296&amp;resourceId=101037296_05_05_99/v.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" width="480" height="400"></embed></p> <p>&nbsp;</p> <h2>示例代码</h2><pre class="csharpcode"><span class="kwrd">using</span> System.Windows;
<span class="kwrd">using</span> System.Windows.Input;
<span class="kwrd">using</span> GalaSoft.MvvmLight;
<span class="kwrd">using</span> GalaSoft.MvvmLight.Command;


<span class="kwrd">namespace</span> WpfMVVM
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> MainWindowViewModel:ViewModelBase
    {

        <span class="kwrd">private</span> <span class="kwrd">string</span> _UserName;
        <span class="kwrd">public</span> <span class="kwrd">string</span> UserName
        {
            get { <span class="kwrd">return</span> _UserName; }
            set
            {
                <span class="kwrd">if</span> (_UserName != <span class="kwrd">value</span>)
                {
                    _UserName = <span class="kwrd">value</span>;
                    RaisePropertyChanged(<span class="str">"UserName"</span>);
                }
            }
        }



        <span class="kwrd">public</span> ICommand ShowCommand
        {
            get
            {
                <span class="kwrd">return</span> <span class="kwrd">new</span> RelayCommand&lt;<span class="kwrd">string</span>&gt;(
                    (user) =&gt;
                    {
                        MessageBox.Show(user);
                    }, (user) =&gt; {
                        <span class="kwrd">return</span> !<span class="kwrd">string</span>.IsNullOrEmpty(user);
                    });

            }
        }
    }
}
</pre>
<p>&nbsp;</p>
<p>&nbsp;</p><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">Window</span> <span class="attr">x:Class</span><span class="kwrd">="WpfMVVM.MainWindow"</span>
        <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="attr">Title</span><span class="kwrd">="MainWindow"</span>
        <span class="attr">xmlns:local</span><span class="kwrd">="clr-namespace:WpfMVVM"</span>
        <span class="attr">Height</span><span class="kwrd">="350"</span>
        <span class="attr">Width</span><span class="kwrd">="525"</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">Window.DataContext</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">local:MainWindowViewModel</span> <span class="attr">UserName</span><span class="kwrd">="chenxizhang"</span><span class="kwrd">&gt;&lt;/</span><span class="html">local:MainWindowViewModel</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Window.DataContext</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>

            <span class="kwrd">&lt;</span><span class="html">TextBox</span> <span class="attr">Text</span><span class="kwrd">="{Binding UserName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBox</span><span class="kwrd">&gt;</span>

            <span class="kwrd">&lt;</span><span class="html">Button</span> <span class="attr">Content</span><span class="kwrd">="Show"</span>
                    <span class="attr">Command</span><span class="kwrd">="{Binding ShowCommand}"</span>
                    <span class="attr">CommandParameter</span><span class="kwrd">="{Binding UserName}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Button</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Window</span><span class="kwrd">&gt;</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>