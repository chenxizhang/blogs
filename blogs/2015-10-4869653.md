# 在ubuntu server中安装和配置docker 
> 原文发表于 2015-10-11, 地址: http://www.cnblogs.com/chenxizhang/p/4869653.html 


<p>经过一段时间针对不同版本的学习，现在总结当前最新的安装配置过程（应该也是比较简单的）</p> <p>如果不清楚什么是docker，请参考 <a title="https://www.docker.com/" href="https://www.docker.com/">https://www.docker.com/</a></p> <h1>准备工作</h1> <p>建议在安装之前运行下面的命令对ubuntu server进行更新</p> <p>sudo apt-get update</p> <p>sudo apt-get upgrade</p> <p>&nbsp;</p> <h1>安装docker</h1> <p>其实应该只要一句指令即可</p> <p>wget –qO- <a href="https://get.docker.com/">https://get.docker.com/</a> | sh</p> <p>请注意，这里的-q后面跟的是大写的O字母</p> <p>按理说是可以通过apt-get install docker.io这样的方式来安装的，但可能不是最新的，所以最保险的方式就是用上面的命令</p> <p>安装成功后，会显示出来下面的输出结果</p> <p><a href="http://images2015.cnblogs.com/blog/9072/201510/9072-20151011174834612-1846815202.png"><img title="image" border="0" alt="image" src="http://images2015.cnblogs.com/blog/9072/201510/9072-20151011174835081-1959629043.png" width="244" height="132"></a></p> <p>&nbsp;</p> <h1>验证docker安装</h1> <p>通过docker version 检查版本，你可能会遇到下面的提示</p> <p><a href="http://images2015.cnblogs.com/blog/9072/201510/9072-20151011174835393-691264339.png"><img title="image" border="0" alt="image" src="http://images2015.cnblogs.com/blog/9072/201510/9072-20151011174835612-593744421.png" width="244" height="56"></a></p> <p>这是因为当前用户的权限方面的问题，可以将当前用户加入docker这个group</p> <p>sudo gpasswd –a ${USER} docker</p> <p>例如下面这样</p>  <p><pre class="csharpcode">chenxizhang@ubuntu:~$ sudo gpasswd -a ${USER} docker
Adding user chenxizhang to group docker</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<br></p>
<p>然后重新启动docker 服务</p>
<p><pre class="csharpcode">chenxizhang@ubuntu:~$ sudo service docker restart
docker stop/waiting
docker start/running, process 10014</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<br></p>
<p>再次运行docker version,你可能还是会遇到刚才同样的错误</p>
<p><pre class="csharpcode">chenxizhang@ubuntu:~$ docker version
Client:
 Version:      1.8.2
 API version:  1.20
 Go version:   go1.4.2
 Git commit:   0a8c2e3
 Built:        Wed Oct  7 17:48:28 UTC 2015
 OS/Arch:      linux/amd64
Get http:<span class="rem">///var/run/docker.sock/v1.20/version: dial unix /var/run/docker.sock: permission denied.</span>
* Are you trying to connect to a TLS-enabled daemon without TLS?
* Is your docker daemon up and running?</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
</p>
<p>这时，你需要做的是重新启动服务器</p><pre class="csharpcode">sudo reboot</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>再次登陆的时候，就可以正常显示版本信息，表示一切都正常了</p><pre class="csharpcode">chenxizhang@ubuntu:~$ docker version
Client:
 Version:      1.8.2
 API version:  1.20
 Go version:   go1.4.2
 Git commit:   0a8c2e3
 Built:        Wed Oct  7 17:48:28 UTC 2015
 OS/Arch:      linux/amd64

Server:
 Version:      1.8.2
 API version:  1.20
 Go version:   go1.4.2
 Git commit:   0a8c2e3
 Built:        Wed Oct  7 17:48:28 UTC 2015
 OS/Arch:      linux/amd64
</pre>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
</p>
<h1>享受docker吧</h1>
<p><pre class="csharpcode">chenxizhang@ubuntu:~$ docker run hello-world
Unable to find image <span class="str">'hello-world:latest'</span> locally
latest: Pulling from library/hello-world
535020c3e8ad: Pull complete
af340544ed62: Pull complete
Digest: sha256:a68868bfe696c00866942e8f5ca39e3e31b79c1e50feaee4ce5e28df2f051d5c
Status: Downloaded newer image <span class="kwrd">for</span> hello-world:latest

Hello from Docker.
This message shows that your installation appears to be working correctly.

To generate <span class="kwrd">this</span> message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the <span class="str">"hello-world"</span> image from the Docker Hub.
 3. The Docker daemon created a <span class="kwrd">new</span> container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To <span class="kwrd">try</span> something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker Hub account:
 https:<span class="rem">//hub.docker.com</span>

For more examples and ideas, visit:
 https:<span class="rem">//docs.docker.com/userguide/</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style></p>