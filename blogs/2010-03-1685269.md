# 默认情况下程序启动后到底是几个线程？ 
> 原文发表于 2010-03-13, 地址: http://www.cnblogs.com/chenxizhang/archive/2010/03/13/1685269.html 


<p>默认情况下，在调试状态下我们可以看到下面的效果</p> <p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_2.png" class="thickbox"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_thumb.png" width="634" height="190"></a> </p> <p>这里面的线程中</p> <ul> <li>主线程 不必多说，就是程序的主要工作线程</li> <li>SystemEvents线程之前探讨过是系统事件触发之后的工作线程</li> <li>另外几个线程，很奇怪。但至少那个vshost.RunParkingWindow，从字面上说可能与vshost有关</li></ul> <p>&nbsp;</p> <p>接下来，我们尝试禁用掉vshost（下图中禁用“启用Visual Studio宿主进程”）</p> <p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_4.png" class="thickbox"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_thumb_1.png" width="963" height="732"></a> </p> <p>再来看线程信息</p> <p></p> <p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_6.png" class="thickbox"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_thumb_2.png" width="412" height="117"></a> </p> <p>整个世界清净多了，现在就剩下了一个线程。这与我们一般意义上讲的单线程程序是相吻合的。</p> <p>那么，为什么连那个System Events线程都没有了呢？这是因为我们当前程序并没有监控有关的SystemEvents事件，所以它默认是不会创建这个线程的</p> <p>如果我们添加了如下的代码</p><pre class="csharpcode"><span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Threading;
<span class="kwrd">using</span> Microsoft.Win32;

<span class="kwrd">namespace</span> ConsoleApplication1
{
    <span class="kwrd">class</span> Program
    {
        
        <span class="kwrd">static</span> <span class="kwrd">void</span> Main(<span class="kwrd">string</span>[] args)
        {

            Console.WriteLine(<span class="str">"Main Thread ID:{0}"</span>, Thread.CurrentThread.ManagedThreadId);

            SystemEvents.TimerElapsed += <span class="kwrd">new</span> TimerElapsedEventHandler(SystemEvents_TimerElapsed);
            SystemEvents.CreateTimer(1000);
            Console.Read();


        }

        <span class="kwrd">static</span> <span class="kwrd">void</span> SystemEvents_TimerElapsed(<span class="kwrd">object</span> sender, TimerElapsedEventArgs e)
        {
            Console.WriteLine(<span class="str">"System Events Thread ID:{0}"</span>,Thread.CurrentThread.ManagedThreadId);
        }

    }
}
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>那么，此时就可以看到那个辅助线程了</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_8.png" class="thickbox"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/WindowsLiveWriter/3dd1b29a9549_1366F/image_thumb_3.png" width="632" height="113"></a> </p>
<p>那么，到这里为止，你应该知道了，一个应用程序开起来之后到底会有几个线程了吧？</p>