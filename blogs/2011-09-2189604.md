# 参照WPF实现Silverlight中的多值绑定特性 
> 原文发表于 2011-09-24, 地址: http://www.cnblogs.com/chenxizhang/archive/2011/09/24/2189604.html 


<h1>前言</h1> <p>数据绑定在WPF和Silvelright开发中的作用不言而喻，无处不在的绑定，节省了大量的代码，也实现了很多之前用代码都无法实现的特性。</p> <p>下面有很多参考的文章</p> <p><a href="http://zzk.cnblogs.com/so.aspx?w=silverlight+databinding&amp;t=">http://zzk.cnblogs.com/so.aspx?w=silverlight+databinding&amp;t=</a></p> <p><a href="http://zzk.cnblogs.com/so.aspx?w=wpf+databinding&amp;t=">http://zzk.cnblogs.com/so.aspx?w=wpf+databinding&amp;t=</a></p> <p>&nbsp;</p> <p>我们之前熟知的绑定，有单向绑定，双向绑定等等。今天要讲一下多值绑定的问题，也就是说，如何给一个属性的值绑定多个数据源。</p> <p>这个特性，在WPF中是内置的，而Silverlight中则没有提供直接的支持。本文提供了一个对照，并且给出了在Silverlight中的一个替代方案，实际上与WPF使用很类似了。</p> <p>&nbsp;</p> <h1>WPF中的实现</h1> <p>我们首先来看一下常规的绑定</p><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">Window</span>
    <span class="attr">x:Class</span><span class="kwrd">="WpfApplicationSample.MainWindow"</span>
    <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="attr">Title</span><span class="kwrd">="MainWindow"</span>
    <span class="attr">Height</span><span class="kwrd">="350"</span>
    <span class="attr">Width</span><span class="kwrd">="525"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
        <span class="rem">&lt;!--WPF 单值绑定--&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">TextBlock</span>
            <span class="attr">Text</span><span class="kwrd">="{Binding Title}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>


    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Window</span><span class="kwrd">&gt;</span>
</pre>
<p>这个很简单，我们几乎不需要做任何解释</p>
<p>&nbsp;</p>
<p>接下来看一下WPF中如何进行多值绑定</p><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">Window</span>
    <span class="attr">x:Class</span><span class="kwrd">="WpfApplicationSample.MainWindow"</span>
    <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="attr">Title</span><span class="kwrd">="MainWindow"</span>
    <span class="attr">Height</span><span class="kwrd">="350"</span>
    <span class="attr">Width</span><span class="kwrd">="525"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
        <span class="rem">&lt;!--WPF 单值绑定--&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">TextBlock</span>
            <span class="attr">Text</span><span class="kwrd">="{Binding Title}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>

        <span class="rem">&lt;!--WPF 多值绑定,结合StringFormat--&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">MultiBinding</span>
                    <span class="attr">StringFormat</span><span class="kwrd">=" {0}-{1}"</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Title"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Time"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">MultiBinding</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Window</span><span class="kwrd">&gt;</span>
</pre>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
这是第一种多值绑定方式，可以直接通过StringFormat格式化多个值，并最终显示在TextBlock中。这种做法，在很多时候，都够用了。</p>
<p>&nbsp;</p>
<p>但是，在某些时候，我们可能需要对这些多个值做复杂的处理，光用StringFormat满足不了要求，怎么办呢？</p>
<p>是的，我们会联想到使用ValueConverter。在System.Windows.Data这个命名空间中，我们以前用过一个IValueConverter的接口对吧，那是针对单值绑定的。关于这个接口，更多信息，可以参考 <a href="http://msdn.microsoft.com/zh-cn/library/system.windows.data.ivalueconverter.aspx">http://msdn.microsoft.com/zh-cn/library/system.windows.data.ivalueconverter.aspx</a></p><pre class="csharpcode"><span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections.Generic;
<span class="kwrd">using</span> System.Linq;
<span class="kwrd">using</span> System.Text;
<span class="kwrd">using</span> System.Windows.Data;

<span class="kwrd">namespace</span> WpfApplicationSample
{
    <span class="rem">/// &lt;summary&gt;</span>
    <span class="rem">/// WPF单值绑定转换器</span>
    <span class="rem">/// 作者：陈希章</span>
    <span class="rem">/// &lt;/summary&gt;</span>
    <span class="kwrd">public</span> <span class="kwrd">class</span> TitleConverter:IValueConverter
    {
        <span class="preproc">#region</span> IValueConverter Members

        <span class="kwrd">public</span> <span class="kwrd">object</span> Convert(<span class="kwrd">object</span> <span class="kwrd">value</span>, Type targetType, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
        {
            <span class="rem">//这里实现具体逻辑</span>
            <span class="kwrd">throw</span> <span class="kwrd">new</span> NotImplementedException();
        }

        <span class="kwrd">public</span> <span class="kwrd">object</span> ConvertBack(<span class="kwrd">object</span> <span class="kwrd">value</span>, Type targetType, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
        {
            <span class="rem">//这里实现具体逻辑</span>
            <span class="kwrd">throw</span> <span class="kwrd">new</span> NotImplementedException();
        }

        <span class="preproc">#endregion</span>
    }
}
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<p>既然是这个思路，那么有没有多值转换器呢？答案是有的。请参考</p><pre class="csharpcode"><span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections.Generic;
<span class="kwrd">using</span> System.Linq;
<span class="kwrd">using</span> System.Text;
<span class="kwrd">using</span> System.Windows.Data;

<span class="kwrd">namespace</span> WpfApplicationSample
{
    <span class="rem">/// &lt;summary&gt;</span>
    <span class="rem">/// WPF单值绑定转换器</span>
    <span class="rem">/// 作者：陈希章</span>
    <span class="rem">/// &lt;/summary&gt;</span>
    <span class="kwrd">class</span> MultiValueConverterSample:IMultiValueConverter
    {
        <span class="preproc">#region</span> IMultiValueConverter Members

        <span class="kwrd">public</span> <span class="kwrd">object</span> Convert(<span class="kwrd">object</span>[] values, Type targetType, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
        {
            <span class="rem">//这里实现具体逻辑,请注意第一个参数是一个数组，可以传递多个值</span>
            <span class="kwrd">throw</span> <span class="kwrd">new</span> NotImplementedException();
        }

        <span class="kwrd">public</span> <span class="kwrd">object</span>[] ConvertBack(<span class="kwrd">object</span> <span class="kwrd">value</span>, Type[] targetTypes, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
        {
            <span class="kwrd">throw</span> <span class="kwrd">new</span> NotImplementedException();
        }

        <span class="preproc">#endregion</span>
    }
}
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<p>那么，如何在XAML中使用这个转换器呢？其实和单值转换器是一样的，请参考下面的语法</p><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">Window</span>
    <span class="attr">x:Class</span><span class="kwrd">="WpfApplicationSample.MainWindow"</span>
    <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="attr">Title</span><span class="kwrd">="MainWindow"</span>
    <span class="attr">Height</span><span class="kwrd">="350"</span>
    <span class="attr">Width</span><span class="kwrd">="525"</span>
    <span class="attr">xmlns:local</span><span class="kwrd">="clr-namespace:WpfApplicationSample"</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">Window.Resources</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">local:MultiValueConverterSample</span>
            <span class="attr">x:Key</span><span class="kwrd">="cv"</span><span class="kwrd">&gt;&lt;/</span><span class="html">local:MultiValueConverterSample</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Window.Resources</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
        <span class="rem">&lt;!--WPF 单值绑定--&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">TextBlock</span>
            <span class="attr">Text</span><span class="kwrd">="{Binding Title}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>

        <span class="rem">&lt;!--WPF 多值绑定,结合StringFormat--&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">MultiBinding</span>
                    <span class="attr">StringFormat</span><span class="kwrd">=" {0}-{1}"</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Title"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Time"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">MultiBinding</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>

        <span class="rem">&lt;!--WPF 多值绑定，结合Converter--&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">MultiBinding</span>
                    <span class="attr">Converter</span><span class="kwrd">="{StaticResource cv}"</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Title"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                        <span class="attr">Path</span><span class="kwrd">="Time"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">MultiBinding</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">TextBlock.Text</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Window</span><span class="kwrd">&gt;</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>看起来很好理解，对吧？这是WPF中为我们默认就提供的功能，确实很方便。</p>
<p>但是，这个特性（多值绑定）却没有在Silverlight中实现。</p>
<p>&nbsp;</p>
<h1>如何在Silverlight中实现类似的功能</h1>
<p>为了在Silverlight中实现类似的功能，不少先进同学前仆后继，做出了不懈的努力。我看到过一个比较好的实现是下面这个scott同学提供的，请参考英文博客</p>
<p><a title="http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/" href="http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/">http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/</a></p>
<p>我在这个基础上做了一些改动和完善，并且将它封装到了之前提供的<a href="http://nuget.org/List/Packages/WPFSilverlightExtension/">WPFSilverlightExtension</a>中，以便大家更好地使用</p>
<p>【备注】这个Extension包，我会不断更新，将可用于Silverlight或者WPF中的一些扩展功能添加进去。目前包含的两个功能是</p>
<p>1.<a href="http://www.cnblogs.com/chenxizhang/archive/2011/09/22/2185414.html">GridHelper</a> (给Grid添加边框，适用于WPF和Silverlight)&nbsp; </p>
<p>2.Multiple Binding（多值绑定-仅Silverlight，在1.4版本中提供)</p>
<p>&nbsp;</p>
<p>添加这个扩展之后，你可以通过下面的方式使用它</p><pre class="csharpcode">    <span class="kwrd">&lt;</span><span class="html">UserControl</span> <span class="attr">x:Class</span><span class="kwrd">="SilverlightApplicationSample.MainPage"</span>
        <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="attr">xmlns:d</span><span class="kwrd">="http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="attr">xmlns:mc</span><span class="kwrd">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="attr">mc:Ignorable</span><span class="kwrd">="d"</span>
        <span class="attr">d:DesignHeight</span><span class="kwrd">="300"</span> <span class="attr">d:DesignWidth</span><span class="kwrd">="400"</span>
        <span class="attr">xmlns:data</span><span class="kwrd">="clr-namespace:System.Windows.Data;assembly=SilverlightExtension"</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">Grid</span> <span class="attr">x:Name</span><span class="kwrd">="LayoutRoot"</span> <span class="attr">Background</span><span class="kwrd">="White"</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">data:BindingUtil.MultiBindings</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">data:MultiBindings</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;</span><span class="html">data:MultiBinding</span>
                            <span class="attr">TargetProperty</span><span class="kwrd">="Text"</span>
                            <span class="attr">StringFormat</span><span class="kwrd">=" {0}-{1}"</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">data:MultiBinding.Bindings</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;</span><span class="html">data:BindingCollection</span><span class="kwrd">&gt;</span>
                                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                                        <span class="attr">Path</span><span class="kwrd">="Id"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                                        <span class="attr">Path</span><span class="kwrd">="Time"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;/</span><span class="html">data:BindingCollection</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;/</span><span class="html">data:MultiBinding.Bindings</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;/</span><span class="html">data:MultiBinding</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;/</span><span class="html">data:MultiBindings</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">data:BindingUtil.MultiBindings</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">UserControl</span><span class="kwrd">&gt;</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<p>你也可以同样定义一个多值转换器</p><pre class="csharpcode">    <span class="kwrd">using</span> System;
    <span class="kwrd">using</span> System.Net;
    <span class="kwrd">using</span> System.Windows;
    <span class="kwrd">using</span> System.Windows.Controls;
    <span class="kwrd">using</span> System.Windows.Documents;
    <span class="kwrd">using</span> System.Windows.Ink;
    <span class="kwrd">using</span> System.Windows.Input;
    <span class="kwrd">using</span> System.Windows.Media;
    <span class="kwrd">using</span> System.Windows.Media.Animation;
    <span class="kwrd">using</span> System.Windows.Shapes;

    <span class="kwrd">using</span> System.Windows.Data;

    <span class="kwrd">namespace</span> SilverlightApplicationSample
    {
        <span class="kwrd">public</span> <span class="kwrd">class</span> MultiValueConverterSample:IMultiValueConverter
        {

            <span class="preproc">#region</span> IMultiValueConverter Members

            <span class="kwrd">public</span> <span class="kwrd">object</span> Convert(<span class="kwrd">object</span>[] values, Type targetType, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
            {
                <span class="kwrd">return</span> <span class="kwrd">string</span>.Format(<span class="str">"{0}-{1}"</span>, values);
            }

            <span class="kwrd">public</span> <span class="kwrd">object</span>[] ConvertBack(<span class="kwrd">object</span> <span class="kwrd">value</span>, Type[] targetTypes, <span class="kwrd">object</span> parameter, System.Globalization.CultureInfo culture)
            {
                <span class="kwrd">throw</span> <span class="kwrd">new</span> NotImplementedException();
            }

            <span class="preproc">#endregion</span>
        }
    }</pre>
<p>&nbsp;</p>
<p>然后，像下面这样使用它</p><pre class="csharpcode">    <span class="kwrd">&lt;</span><span class="html">UserControl</span>
        <span class="attr">x:Class</span><span class="kwrd">="SilverlightApplicationSample.MainPage"</span>
        <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="attr">xmlns:d</span><span class="kwrd">="http://schemas.microsoft.com/expression/blend/2008"</span>
        <span class="attr">xmlns:mc</span><span class="kwrd">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
        <span class="attr">mc:Ignorable</span><span class="kwrd">="d"</span>
        <span class="attr">d:DesignHeight</span><span class="kwrd">="300"</span>
        <span class="attr">d:DesignWidth</span><span class="kwrd">="400"</span>
        <span class="attr">xmlns:data</span><span class="kwrd">="clr-namespace:System.Windows.Data;assembly=SilverlightExtension"</span>
        <span class="attr">xmlns:local</span><span class="kwrd">="clr-namespace:SilverlightApplicationSample"</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">UserControl.Resources</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">local:MultiValueConverterSample</span>
                <span class="attr">x:Key</span><span class="kwrd">="cv"</span><span class="kwrd">&gt;&lt;/</span><span class="html">local:MultiValueConverterSample</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">UserControl.Resources</span><span class="kwrd">&gt;</span>
    
        <span class="kwrd">&lt;</span><span class="html">Grid</span>
            <span class="attr">x:Name</span><span class="kwrd">="LayoutRoot"</span>
            <span class="attr">Background</span><span class="kwrd">="White"</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">data:BindingUtil.MultiBindings</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">data:MultiBindings</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;</span><span class="html">data:MultiBinding</span>
                            <span class="attr">TargetProperty</span><span class="kwrd">="Text"</span> <span class="attr">Converter</span><span class="kwrd">="{StaticResource cv}"</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">data:MultiBinding.Bindings</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;</span><span class="html">data:BindingCollection</span><span class="kwrd">&gt;</span>
                                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                                        <span class="attr">Path</span><span class="kwrd">="Id"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                                    <span class="kwrd">&lt;</span><span class="html">Binding</span>
                                        <span class="attr">Path</span><span class="kwrd">="Time"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Binding</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;/</span><span class="html">data:BindingCollection</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;/</span><span class="html">data:MultiBinding.Bindings</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;/</span><span class="html">data:MultiBinding</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;/</span><span class="html">data:MultiBindings</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">data:BindingUtil.MultiBindings</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">UserControl</span><span class="kwrd">&gt;</span></pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<h1>总结</h1>
<p>本文对照了在WPF和Silverlight中实现多值绑定的特性，并且给出了一个Silverlight中的替代解决方案</p>