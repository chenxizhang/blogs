# 理解Prism中MVVM的Command与CommandParameter 
> 原文发表于 2012-04-14, 地址: http://www.cnblogs.com/chenxizhang/archive/2012/04/14/2446782.html 


<h2>内容摘要</h2> <p>接上一讲（<a href="http://www.cnblogs.com/chenxizhang/archive/2012/04/13/2446415.html">http://www.cnblogs.com/chenxizhang/archive/2012/04/13/2446415.html</a>），这一讲中我使用Prism做了演示和比较。Prism不仅仅是一个MVVM框架，它还包含其他的模块。在MVVM这个层面，Prism有些特殊性（Command绑定有特殊语法），这也是我这一讲的主要内容。</p> <p>&nbsp;</p> <h2>Prism的下载链接</h2> <p><a title="http://compositewpf.codeplex.com/" href="http://compositewpf.codeplex.com/">http://compositewpf.codeplex.com/</a></p> <p>&nbsp;</p> <h2>视频地址</h2> <p><a href="http://www.tudou.com/programs/view/72Ag1kQt1RA/">http://www.tudou.com/programs/view/72Ag1kQt1RA/</a></p> <p><embed src="http://www.tudou.com/v/72Ag1kQt1RA/&amp;rpid=101037296&amp;resourceId=101037296_05_05_99/v.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="opaque" width="480" height="400"></embed></p> <p>&nbsp;</p> <h2>示例代码</h2><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">Window</span> <span class="attr">x:Class</span><span class="kwrd">="WPFPrismMvvm.MainWindow"</span>
        <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
        <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
        <span class="attr">Title</span><span class="kwrd">="MainWindow"</span>
        <span class="attr">Height</span><span class="kwrd">="350"</span>
        <span class="attr">xmlns:local</span><span class="kwrd">="clr-namespace:WPFPrismMvvm"</span>
        <span class="attr">xmlns:cmd</span><span class="kwrd">="clr-namespace:Microsoft.Practices.Prism.Commands;assembly=Microsoft.Practices.Prism"</span>
        <span class="attr">Width</span><span class="kwrd">="525"</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Window.DataContext</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">local:MainWindowViewModel</span> <span class="attr">UserName</span><span class="kwrd">="chenxizhang"</span><span class="kwrd">&gt;&lt;/</span><span class="html">local:MainWindowViewModel</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Window.DataContext</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span><span class="kwrd">&gt;</span>

        <span class="kwrd">&lt;</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>

            <span class="kwrd">&lt;</span><span class="html">TextBox</span> <span class="attr">Text</span><span class="kwrd">="{Binding UserName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBox</span><span class="kwrd">&gt;</span>

            <span class="kwrd">&lt;</span><span class="html">Button</span> <span class="attr">Content</span><span class="kwrd">="Show"</span>
                    <span class="attr">cmd:Click</span>.<span class="attr">Command</span><span class="kwrd">="{Binding ShowCommand}"</span>
                    <span class="attr">cmd:Click</span>.<span class="attr">CommandParameter</span><span class="kwrd">="{Binding UserName}"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Button</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">Window</span><span class="kwrd">&gt;</span>
</pre>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
</p><pre class="csharpcode"><span class="kwrd">using</span> System;
<span class="kwrd">using</span> System.Collections.Generic;
<span class="kwrd">using</span> System.Linq;
<span class="kwrd">using</span> System.Text;

<span class="kwrd">using</span> Microsoft.Practices.Prism.ViewModel;
<span class="kwrd">using</span> Microsoft.Practices.Prism.Commands;
<span class="kwrd">using</span> System.Windows.Input;
<span class="kwrd">using</span> System.Windows;

<span class="kwrd">namespace</span> WPFPrismMvvm
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> MainWindowViewModel:NotificationObject
    {

        <span class="kwrd">private</span> <span class="kwrd">string</span> _UserName;
        <span class="kwrd">public</span> <span class="kwrd">string</span> UserName
        {
            get { <span class="kwrd">return</span> _UserName; }
            set
            {
                <span class="kwrd">if</span> (_UserName != <span class="kwrd">value</span>)
                {
                    _UserName = <span class="kwrd">value</span>;
                    RaisePropertyChanged(<span class="str">"UserName"</span>);
                }
            }
        }



        <span class="kwrd">public</span> ICommand ShowCommand
        {
            get
            {
                <span class="kwrd">return</span> <span class="kwrd">new</span> DelegateCommand&lt;<span class="kwrd">string</span>&gt;(
                    (user) =&gt;
                    {
                        MessageBox.Show(user);
                    }, (user) =&gt; {
                        <span class="kwrd">return</span> !<span class="kwrd">string</span>.IsNullOrEmpty(user);
                    });

            }
        }
    }
}
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>