# Silverlight:通过模板定制设置日期选择器的格式 
> 原文发表于 2011-08-07, 地址: http://www.cnblogs.com/chenxizhang/archive/2011/08/07/2129869.html 


<p>这是日前被问到的一个小问题，情况是这样的：Silverlight里面有一个DatePicker控件，它可以让用户选择或者输入日期。</p> <p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201108/201108071117416092.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201108/201108071117414074.png" width="526" height="196"></a></p> <p>这个控件其实很不错，既可选择，又可以输入。</p> <p>但问题就出在这个输入上面，有时候我们可能不希望用户去输入，而是必须选择。但是，我们在DatePicker控件上面却找不到类似于IsReadOnly这样的属性。</p> <p>其实，这样的需求，可以通过修改DatePicker控件的模板来实现。下面是一个示例</p><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">UserControl</span>
<strong>    <span class="attr">xmlns:sdk</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"</span></strong>
    <span class="attr">x:Class</span><span class="kwrd">="SilverlightApplication3.MainPage"</span>
    <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="attr">xmlns:d</span><span class="kwrd">="http://schemas.microsoft.com/expression/blend/2008"</span>
    <span class="attr">xmlns:mc</span><span class="kwrd">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
    <span class="attr">mc:Ignorable</span><span class="kwrd">="d"</span>
    <span class="attr">d:DesignHeight</span><span class="kwrd">="300"</span>
    <span class="attr">d:DesignWidth</span><span class="kwrd">="400"</span>
<strong>    <span class="attr">xmlns:dp</span><span class="kwrd">="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows.Controls"</span></strong><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">Grid</span>
        <span class="attr">x:Name</span><span class="kwrd">="LayoutRoot"</span>
        <span class="attr">Background</span><span class="kwrd">="White"</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">sdk:DatePicker</span>
            <span class="attr">Height</span><span class="kwrd">="40"</span>
            <span class="attr">Width</span><span class="kwrd">="300"</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">sdk:DatePicker.Template</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">ControlTemplate</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">Border</span>
                        <span class="attr">BorderBrush</span><span class="kwrd">="Black"</span>
                        <span class="attr">BorderThickness</span><span class="kwrd">="1"</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;</span><span class="html">Grid</span>
                            <span class="attr">x:Name</span><span class="kwrd">="Root"</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">Grid.ColumnDefinitions</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;</span><span class="html">ColumnDefinition</span>
                                    <span class="attr">Width</span><span class="kwrd">="*"</span><span class="kwrd">&gt;&lt;/</span><span class="html">ColumnDefinition</span><span class="kwrd">&gt;</span>
                                <span class="kwrd">&lt;</span><span class="html">ColumnDefinition</span>
                                    <span class="attr">Width</span><span class="kwrd">="Auto"</span><span class="kwrd">&gt;&lt;/</span><span class="html">ColumnDefinition</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;/</span><span class="html">Grid.ColumnDefinitions</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">dp:DatePickerTextBox</span>
                               <strong> <span class="attr">IsReadOnly</span><span class="kwrd">="True"</span></strong>
                                <span class="attr">x:Name</span><span class="kwrd">="TextBox"</span>
                                <span class="attr">Margin</span><span class="kwrd">="5"</span><span class="kwrd">&gt;&lt;/</span><span class="html">dp:DatePickerTextBox</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">Button</span>
                                <span class="attr">Content</span><span class="kwrd">="Pick"</span>
                                <span class="attr">Grid</span>.<span class="attr">Column</span><span class="kwrd">="1"</span>
                                <span class="attr">x:Name</span><span class="kwrd">="Button"</span>
                                <span class="attr">Margin</span><span class="kwrd">="5"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Button</span><span class="kwrd">&gt;</span>
                            <span class="kwrd">&lt;</span><span class="html">Popup</span>
                                <span class="attr">x:Name</span><span class="kwrd">="Popup"</span><span class="kwrd">&gt;&lt;/</span><span class="html">Popup</span><span class="kwrd">&gt;</span>
                        <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;/</span><span class="html">Border</span><span class="kwrd">&gt;</span>

                <span class="kwrd">&lt;/</span><span class="html">ControlTemplate</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">sdk:DatePicker.Template</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">sdk:DatePicker</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">UserControl</span><span class="kwrd">&gt;</span>
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201108/20110807111742420.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201108/201108071117437846.png" width="541" height="165"></a></p>
<p>&nbsp;</p>
<p>怎么理解上面的定义呢？我们用了一个Grid,里面放了三个控件。这里的关键就在于，包括Grid在内的四个控件的名称都是有规定的，而且控件类型也是规定的。请参考下面的文档就知道了</p>
<p><a href="http://msdn.microsoft.com/en-us/library/cc278067(v=vs.95).aspx">http://msdn.microsoft.com/en-us/library/cc278067(v=vs.95).aspx</a></p>
<p>&nbsp;</p><span class="Apple-style-span">
<p xmlns="http://www.w3.org/1999/xhtml"><font face="Segoe UI"><font>The following table lists the named parts for the<span class="Apple-converted-space">&nbsp;</span><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker(v=vs.95).aspx"><font color="#1364c4">DatePicker</font></a></span><span class="Apple-converted-space">&nbsp;</span>control.</font></font></p>
<div class="caption" xmlns="http://www.w3.org/1999/xhtml"></div>
<div class="tableSection" xmlns="http://www.w3.org/1999/xhtml">
<table width="1060">
<tbody>
<tr>
<th height="21" align="left">
<p><font face="Segoe UI"><font>DatePicker Part</font></font></p></th>
<th height="21" align="left">
<p><font face="Segoe UI"><font>Type</font></font></p></th>
<th height="21" align="left">
<p><font face="Segoe UI"><font>Description</font></font></p></th></tr>
<tr>
<td>
<p><font face="Segoe UI">Root</font></p></td>
<td>
<p><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.grid(v=vs.95).aspx"><font color="#1364c4" face="Segoe UI">Grid</font></a></span></p></td>
<td>
<p><font face="Segoe UI">The root of the control.</font></p></td></tr>
<tr>
<td>
<p><font face="Segoe UI">Button</font></p></td>
<td>
<p><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.button(v=vs.95).aspx"><font color="#1364c4" face="Segoe UI">Button</font></a></span></p></td>
<td>
<p><font face="Segoe UI">The button that opens and closes the<span class="Apple-converted-space">&nbsp;</span><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.calendar(v=vs.95).aspx"><font color="#1364c4">Calendar</font></a></span>.</font></p></td></tr>
<tr>
<td>
<p><font face="Segoe UI">TextBox</font></p></td>
<td>
<p><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.datepickertextbox(v=vs.95).aspx"><font color="#1364c4" face="Segoe UI">DatePickerTextBox</font></a></span></p></td>
<td>
<p><font face="Segoe UI">The text box that allows you to input a date.</font></p></td></tr>
<tr>
<td>
<p><font face="Segoe UI">Popup</font></p></td>
<td>
<p><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup(v=vs.95).aspx"><font color="#1364c4" face="Segoe UI">Popup</font></a></span></p></td>
<td>
<p><font face="Segoe UI">The popup for the<span class="Apple-converted-space">&nbsp;</span><span><a href="http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker(v=vs.95).aspx"><font color="#1364c4">DatePicker</font></a></span><span class="Apple-converted-space">&nbsp;</span>control.</font></p></td></tr></tbody></table></div></span>
<p>&nbsp;</p>
<p>也就是说，这个控件为了支持定制，内部是定制好了所谓的Part，这都是可以替换的，只要名称和类型一样即可。</p>
<p>&nbsp;</p>
<p>从这个例子看来，其他很多控件也是可以定制的，只要参考下面的介绍即可</p>
<p><a href="http://msdn.microsoft.com/en-us/library/cc278075(v=VS.95).aspx">http://msdn.microsoft.com/en-us/library/cc278075(v=VS.95).aspx</a></p>
<p>&nbsp;</p>


<p>所以说，理解模板，对于Silvelight或者WPF开发来说，是很重要的，给大家参考</p>