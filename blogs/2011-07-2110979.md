# 自定义Domain Service时遇到实体不能更新的问题及其解决方案 
> 原文发表于 2011-07-19, 地址: http://www.cnblogs.com/chenxizhang/archive/2011/07/19/2110979.html 


<p>这是在项目中的一个小问题。我们用到了自定义的Domain Service和自定义Entity，如果仅仅是读取数据，没有任何问题。但如果需要通过双向绑定，实现更新，则可能会遇到一个错误。类似下面这样</p> <p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956268170.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956265106.png" width="456" height="256"></a></p> <p>本文将重现这个问题，并分析原因和提供解决方案。</p> <p>&nbsp;</p> <p>【备注】Domain Service看起来很不错，尤其是结合LINQ to Entity的话。但在使用自定义Domain Service时会遇到各种各样的问题，很多问题是让人莫名其妙的。我个人觉得这个设计模型还需要进一步完善的</p> <p>&nbsp;</p> <h1>1. 自定义业务实体</h1> <p>下面这个类型会被用到服务中返回文件类型映射的信息</p><pre class="csharpcode"><span class="kwrd">using</span> System.ComponentModel.DataAnnotations;

<span class="kwrd">namespace</span> SilverlightApplication3.Web
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> Employee
    {
        [Key]
        <span class="kwrd">public</span> <span class="kwrd">int</span> ID { get; set; }
        [Editable(<span class="kwrd">true</span>)]
        <span class="kwrd">public</span> <span class="kwrd">string</span> FirstName { get; set; }
        [Editable(<span class="kwrd">true</span>)]
        <span class="kwrd">public</span> <span class="kwrd">string</span> LastName { get; set; }
    }
}</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<p>&nbsp;</p>
<h1>2. 自定义Domain Service</h1><pre class="csharpcode">
<span class="kwrd">namespace</span> SilverlightApplication3.Web
{
    <span class="kwrd">using</span> System.Linq;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Hosting;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Server;


    <span class="rem">// TODO: Create methods containing your application logic.</span>
    [EnableClientAccess()]
    <span class="kwrd">public</span> <span class="kwrd">class</span> SampleDomainService : DomainService
    {
        <span class="kwrd">public</span> IQueryable&lt;Employee&gt; GetEmployees()
        {
            <span class="kwrd">return</span> <span class="kwrd">new</span>[]{
                <span class="kwrd">new</span> Employee(){ID=1,FirstName=<span class="str">"ares"</span>,LastName=<span class="str">"chen"</span>},
                <span class="kwrd">new</span> Employee(){ID=2,FirstName=<span class="str">"bill"</span>,LastName=<span class="str">"gate"</span>}}.AsQueryable();

        }
    }
}


</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<h1>3. 客户端的ViewModel</h1><pre class="csharpcode"><span class="kwrd">using</span> System.Collections.ObjectModel;
<span class="kwrd">using</span> Microsoft.Practices.Prism.ViewModel;
<span class="kwrd">using</span> SilverlightApplication3.Web;
<span class="kwrd">using</span> System.ComponentModel;

<span class="kwrd">namespace</span> SilverlightApplication3.ViewModels
{
    <span class="kwrd">public</span> <span class="kwrd">class</span> MainPageViewModel:NotificationObject
    {

        <span class="kwrd">public</span> MainPageViewModel()
        {

            <span class="kwrd">if</span>(DesignerProperties.IsInDesignTool) <span class="kwrd">return</span>;

            var ctx = <span class="kwrd">new</span> SampleDomainContext();
            ctx.Load&lt;Employee&gt;(ctx.GetEmployeesQuery(), (op) =&gt; {
                Employees = <span class="kwrd">new</span> ObservableCollection&lt;Employee&gt;(op.Entities);
            }, <span class="kwrd">true</span>);
        }


        <span class="kwrd">private</span> ObservableCollection&lt;Employee&gt; _Employees;
        <span class="kwrd">public</span> ObservableCollection&lt;Employee&gt; Employees
        {
            get { <span class="kwrd">return</span> _Employees; }
            set
            {
                <span class="kwrd">if</span>(_Employees != <span class="kwrd">value</span>)
                {
                    _Employees = <span class="kwrd">value</span>;
                    RaisePropertyChanged(<span class="str">"Employees"</span>);
                }
            }
        }

    }
}
</pre>
<h1>4. 页面定义</h1><pre class="csharpcode"><span class="kwrd">&lt;</span><span class="html">UserControl</span>
    <span class="attr">xmlns:sdk</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"</span>
    <span class="attr">x:Class</span><span class="kwrd">="SilverlightApplication3.MainPage"</span>
    <span class="attr">xmlns</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span>
    <span class="attr">xmlns:x</span><span class="kwrd">="http://schemas.microsoft.com/winfx/2006/xaml"</span>
    <span class="attr">xmlns:d</span><span class="kwrd">="http://schemas.microsoft.com/expression/blend/2008"</span>
    <span class="attr">xmlns:mc</span><span class="kwrd">="http://schemas.openxmlformats.org/markup-compatibility/2006"</span>
    <span class="attr">mc:Ignorable</span><span class="kwrd">="d"</span>
    <span class="attr">d:DesignHeight</span><span class="kwrd">="300"</span>
    <span class="attr">d:DesignWidth</span><span class="kwrd">="400"</span>
    <span class="attr">xmlns:vm</span><span class="kwrd">="clr-namespace:SilverlightApplication3.ViewModels"</span><span class="kwrd">&gt;</span>

    <span class="kwrd">&lt;</span><span class="html">UserControl.DataContext</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">vm:MainPageViewModel</span><span class="kwrd">&gt;&lt;/</span><span class="html">vm:MainPageViewModel</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">UserControl.DataContext</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">Grid</span>
        <span class="attr">x:Name</span><span class="kwrd">="LayoutRoot"</span>
        <span class="attr">Background</span><span class="kwrd">="White"</span>
        <span class="attr">Margin</span><span class="kwrd">="20"</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">TextBlock</span>
                <span class="attr">Text</span><span class="kwrd">="Employee List"</span>
                <span class="attr">FontSize</span><span class="kwrd">="20"</span><span class="kwrd">&gt;&lt;/</span><span class="html">TextBlock</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;</span><span class="html">sdk:DataGrid</span>
                <span class="attr">Margin</span><span class="kwrd">="10"</span>
                <span class="attr">ItemsSource</span><span class="kwrd">="{Binding Employees}"</span>
                <span class="attr">AutoGenerateColumns</span><span class="kwrd">="False"</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;</span><span class="html">sdk:DataGrid.Columns</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">sdk:DataGridTextColumn</span>
                        <span class="attr">Binding</span><span class="kwrd">="{Binding ID}"</span>
                        <span class="attr">Header</span><span class="kwrd">="ID"</span><span class="kwrd">&gt;&lt;/</span><span class="html">sdk:DataGridTextColumn</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">sdk:DataGridTextColumn</span>
                        <span class="attr">Binding</span><span class="kwrd">="{Binding FirstName,Mode=TwoWay}"</span>
                        <span class="attr">Header</span><span class="kwrd">="FirstName"</span><span class="kwrd">&gt;&lt;/</span><span class="html">sdk:DataGridTextColumn</span><span class="kwrd">&gt;</span>
                    <span class="kwrd">&lt;</span><span class="html">sdk:DataGridTextColumn</span>
                        <span class="attr">Binding</span><span class="kwrd">="{Binding LastName,Mode=TwoWay}"</span>
                        <span class="attr">Header</span><span class="kwrd">="LastName"</span><span class="kwrd">&gt;&lt;/</span><span class="html">sdk:DataGridTextColumn</span><span class="kwrd">&gt;</span>
                <span class="kwrd">&lt;/</span><span class="html">sdk:DataGrid.Columns</span><span class="kwrd">&gt;</span>
            <span class="kwrd">&lt;/</span><span class="html">sdk:DataGrid</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;/</span><span class="html">StackPanel</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">Grid</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">UserControl</span><span class="kwrd">&gt;</span>
</pre>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
</p>
<h1>5. 测试运行</h1>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956266501.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956263436.png" width="1003" height="328"></a></p>
<p>读取数据是没有问题的，但是如果我们去编辑FirstName或者LastName，就会发生如下的错误</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956266468.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956273088.png" width="995" height="364"></a></p>
<p>这个错误确实让人看得云里雾里的。不是吗？你绝不会想到是要像下面这样解决</p>
<p>&nbsp;</p>
<h1>6. 添加一个Updatexxxx方法，使得Employee这个EntitySet可以被编辑</h1>
<p>解决方案居然是要为Employee这个类型，添加一个特殊的方法，用Update做为前缀。看下面的例子</p><pre class="csharpcode">
<span class="kwrd">namespace</span> SilverlightApplication3.Web
{
    <span class="kwrd">using</span> System.Linq;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Hosting;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Server;


    <span class="rem">// TODO: Create methods containing your application logic.</span>
    [EnableClientAccess()]
    <span class="kwrd">public</span> <span class="kwrd">class</span> SampleDomainService : DomainService
    {
        <span class="kwrd">public</span> IQueryable&lt;Employee&gt; GetEmployees()
        {
            <span class="kwrd">return</span> <span class="kwrd">new</span>[]{
                <span class="kwrd">new</span> Employee(){ID=1,FirstName=<span class="str">"ares"</span>,LastName=<span class="str">"chen"</span>},
                <span class="kwrd">new</span> Employee(){ID=2,FirstName=<span class="str">"bill"</span>,LastName=<span class="str">"gate"</span>}}.AsQueryable();

        }

<strong><font color="#ff0000">        <span class="rem">/// &lt;summary&gt;</span>
        <span class="rem">/// 这个方法用来更新员工</span>
        <span class="rem">/// &lt;/summary&gt;</span>
        <span class="rem">/// &lt;param name="e"&gt;&lt;/param&gt;</span>
        <span class="kwrd">public</span> <span class="kwrd">void</span> UpdateEmployee(Employee e)
        {
        }</font></strong>

    }
}


</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>


<p>当然，也可以不叫UpdateEmployee的名字，但参数必须必须是Employee类型</p>
<p>例如下面这样</p><pre class="csharpcode">
<span class="kwrd">namespace</span> SilverlightApplication3.Web
{
    <span class="kwrd">using</span> System.Linq;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Hosting;
    <span class="kwrd">using</span> System.ServiceModel.DomainServices.Server;


    <span class="rem">// TODO: Create methods containing your application logic.</span>
    [EnableClientAccess()]
    <span class="kwrd">public</span> <span class="kwrd">class</span> SampleDomainService : DomainService
    {
        <span class="kwrd">public</span> IQueryable&lt;Employee&gt; GetEmployees()
        {
            <span class="kwrd">return</span> <span class="kwrd">new</span>[]{
                <span class="kwrd">new</span> Employee(){ID=1,FirstName=<span class="str">"ares"</span>,LastName=<span class="str">"chen"</span>},
                <span class="kwrd">new</span> Employee(){ID=2,FirstName=<span class="str">"bill"</span>,LastName=<span class="str">"gate"</span>}}.AsQueryable();

        }


<strong><font color="#ff0000">        <span class="rem">/// &lt;summary&gt;</span>
        <span class="rem">/// 这个方法用来更新员工</span>
        <span class="rem">/// &lt;/summary&gt;</span>
        <span class="rem">/// &lt;param name="e"&gt;&lt;/param&gt;</span>
        [Update]
        <span class="kwrd">public</span> <span class="kwrd">void</span> ModifyEmployee(Employee e)
        {
        }</font></strong>
    }
}


</pre>
<h1>7.再次运行测试（客户端代码无需任何修改）</h1>
<p>请注意，第一行的FirstName已经被修改了（由ares改成了mike）</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956274483.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956271418.png" width="1003" height="328"></a></p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<h1>8. 分析问题的根源</h1>
<p>那么，到底发生了什么呢？为什么添加了那个方法就又可以编辑了呢</p>
<p>我们可以打开客户端自动生成的那个文件来看一下，里面有一段代码很特殊</p><pre class="csharpcode">        <span class="kwrd">internal</span> <span class="kwrd">sealed</span> <span class="kwrd">class</span> SampleDomainContextEntityContainer : EntityContainer
        {
            
            <span class="kwrd">public</span> SampleDomainContextEntityContainer()
            {
                <span class="kwrd">this</span>.CreateEntitySet&lt;Employee&gt;(EntitySetOperations.Edit);
            }
        }</pre>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
</p>
<p>是在这里，在这个内部密封的类型里面，它设置了Employee这个EntitySet是可以编辑的，而其实这个EntitySetOperation是一个枚举，具有下面可用的值</p><pre class="csharpcode"><span class="preproc">#region</span> Assembly System.ServiceModel.DomainServices.Client.dll, v2.0.50727
<span class="rem">// C:\Program Files (x86)\Microsoft SDKs\RIA Services\v1.0\Libraries\Silverlight\System.ServiceModel.DomainServices.Client.dll</span>
<span class="preproc">#endregion</span>

<span class="kwrd">using</span> System;

<span class="kwrd">namespace</span> System.ServiceModel.DomainServices.Client
{
    <span class="rem">// Summary:</span>
    <span class="rem">//     Enumeration of the types of operations permissable on an System.ServiceModel.DomainServices.Client.EntitySet.</span>
    [Flags]
    <span class="kwrd">public</span> <span class="kwrd">enum</span> EntitySetOperations
    {
        <span class="rem">// Summary:</span>
        <span class="rem">//     Only read operations are permitted, no update operations are allowed.</span>
        None = 0,
        <span class="rem">//</span>
        <span class="rem">// Summary:</span>
        <span class="rem">//     New entities may be added</span>
        Add = 1,
        <span class="rem">//</span>
        <span class="rem">// Summary:</span>
        <span class="rem">//     Entities may be updated</span>
        Edit = 2,
        <span class="rem">//</span>
        <span class="rem">// Summary:</span>
        <span class="rem">//     Entities may be removed</span>
        Remove = 4,
        <span class="rem">//</span>
        <span class="rem">// Summary:</span>
        <span class="rem">//     Entities may be added, updated and removed</span>
        All = 7,
    }
}
</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>&nbsp;</p>
<h1>9.题外话：</h1>
<p>我们在使用LINQ to Entity作为Domain Service的数据模型的时候，可能就意识不到这个问题，是因为我们可以在创建Domain Service的时候设置是否允许编辑</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956273022.png"><img title="image" border="0" alt="image" src="http://images.cnblogs.com/cnblogs_com/chenxizhang/201107/201107191956274417.png" width="464" height="554"></a></p>
<p>然后自动生成的Domain Service里面就自动具有了Update,Delete,Insert之类的方法，这样就允许这些业务实体支持更新了。</p>